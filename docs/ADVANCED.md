# 进阶

## 容器的后台运行

* 最开始，所有容器 init 进程都是从 docker daemon 进程 fork 出来。
* 会出现一个问题：daemon 挂掉，所有容器挂掉。
* 后来，Docker 使用了 containerd，即现在的 runc，可以实现 daemon 挂掉，但是容器依然存在。

* 因此需要父进程创建完成子进程后，`detach` 掉子进程。

实现原理

* 容器是 docker fork 出来的子进程。
* 如果父进程推出，子进程称为`孤儿进程`。
* 为了避免孤儿进程退出时无法释放所占用的资源而僵死，进程号为1的进程 init 会接受孤儿进程。
* 


## 实现容器查看

## 实现查看容器日志

## 实现进入容器 NS

## 实现停止容器

## 容器删除

## 通过容器构建镜像

## 实现容器指定环境变量

## 